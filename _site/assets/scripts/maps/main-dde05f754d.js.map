{"version":3,"sources":["app/assets/scripts/main.js"],"names":["getPrimaryStats","countryId","url","$","getJSON","countryData","all_edits","usersCount","Math","round","contributors","editsCount","buildingCount","building_count_add","roadCount","road_count_add","html","toLocaleString","css","getProjects","projects","flexslider","animation","directionNav","slideshowSpeed","prevText","nextText","prependTo","length","forEach","project","i","projectData","geometry","makeProject","fail","err","console","warn","id","makePlaceholderProject","makeNoTasksPlaceholder","projectOrder","props","properties","projDone","done","validated","addClass","name","attr","append","addMap","projectId","ghIssueTitle","PT","ghIssueBody","errorHtml","empty","noTasksHTML","join","onEachFeature","feature","layer","symbology","color","weight","opacity","fillOpacity","fillColor","state","setStyle","endpoint","taskData","map","L","zoomControl","setView","tileLayer","mbBasemapUrl","mbToken","attribution","addTo","attributionControl","setPrefix","featureLayer","geoJson","fitBounds","getBounds","dragging","disable","touchZoom","doubleClickZoom","scrollWheelZoom","keyboard","tap","eventsFunctionality","eventsCount","firstTwoOpen","allOpen","bind","click","event","slice","animate","height","generateEvents","calendarId","match","currentDate","Date","eventData","linkMatch","log","Object","keys","reverse","key","val","eventTime","time","moment","isBefore","title","singupLink","description","desc","replace","location","date","format","d","eventTopSection","flag","eventMainDetails","eventsHTML","setupGraphs","removeExistingGraphs","totalGraph","document","querySelector","bldngGraph","roadsGraph","parentNode","removeChild","moreBtn","teamLabel","teamUserLabel","removeClass","text","getUserActivityStats","code","getGroupActivityStats","showMoreContributions","generateUserUrl","userName","userUrl","toLowerCase","userData","totalSum","user","totalEdits","Number","value","sort","a","b","bldngSum","bldngEdits","roadsSum","roadsEdits","road_km_add","c1","Barchart","c2","c3","d3","select","window","on","resize","generateHashtagUrl","hashtag","hashtagUrl","hashtagData","reduce","acc","ht","isEmptyObject","sum","push","building_count_mod","data","targetElement","margin","top","right","bottom","left","width","parseInt","style","barPadding","barHeight","offset","expanded","graphs","marginTop","x","scale","linear","range","domain","max","chart","node","bars","selectAll","enter","showUpdatesPlaceholder","hotProjects","calendar"],"mappings":"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","file":"main-dde05f754d.js","sourcesContent":["\n/* -------------------------------------------------------\n ------------------- Add Primary Stats -------------------\n -------------------------------------------------------*/\n\nfunction getPrimaryStats (countryId) {\n  const url = `http://osmstats.redcross.org/countries/${countryId}`;\n  $.getJSON(url, function (countryData) {\n    if (countryData.all_edits !== null) {\n      // round value for select stats, then add them to page\n      const usersCount = Math.round(countryData.contributors);\n      const editsCount = Math.round(countryData.all_edits);\n      const buildingCount = Math.round(countryData.building_count_add);\n      const roadCount = Math.round(countryData.road_count_add);\n\n      $('#stats-roadCount').html(roadCount.toLocaleString());\n      $('#stats-buildingCount').html(buildingCount.toLocaleString());\n      $('#stats-usersCount').html(usersCount.toLocaleString());\n      $('#stats-editsCount').html(editsCount.toLocaleString());\n    } else {\n      $('.emphasizedNumber').css('display', 'none');\n    }\n  });\n}\n\n/* -------------------------------------------------------\n --------------- Add HOT Project Carousel ----------------\n -------------------------------------------------------*/\n\n// Fetch Project data from Tasking Manager API\nfunction getProjects (projects) {\n  // Add Flexslider to Projects Section\n  $('.Projects-slider').flexslider({\n    animation: 'slide',\n    directionNav: true,\n    slideshowSpeed: 6000000,\n    prevText: '',\n    nextText: '<i class=\"fa fa-caret-right\" aria-hidden=\"true\"></i>'\n  });\n  $('.flex-next').prependTo('.HOT-Nav-Projects');\n  $('.flex-control-nav').prependTo('.HOT-Nav-Projects');\n  $('.flex-prev').prependTo('.HOT-Nav-Projects');\n  if (projects.length > 0) {\n    if (projects.length === 1) {\n      $('.flex-next').css('display', 'none');\n    }\n    projects.forEach(function (project, i) {\n      const url = `http://tasks.hotosm.org/project/${project}.json`;\n      $.getJSON(url, function (projectData) {\n        if (projectData.geometry) {\n          makeProject(projectData, i + 2);\n        }\n      })\n      .fail(function (err) {\n        console.warn(`WARNING >> Project #${project.id} could not be accessed at ${url}.\\n` +\n                       'The server returned the following message object:', err);\n        makePlaceholderProject(project, i + 2);\n      });\n    });\n  } else {\n    makeNoTasksPlaceholder();\n  }\n}\n\n// Update cards with necessary project details\nfunction makeProject (project, projectOrder) {\n  const props = project.properties;\n  const projDone = Math.round(props.done + props.validated);\n  // Updates Progress Bar\n  $(`#Project-${project.id} .HOT-Progress`).addClass('projWidth' + projectOrder)\n\n  // Adds Project variables to the cards\n  $(`#Project-${project.id} .HOT-Title p`).html(`<b>${project.id} - ${props.name}</b>`);\n  $(`#Project-${project.id} .HOT-Progress`).html(`<p>${projDone}%</p>`);\n  $(`#Project-${project.id} .HOT-Map`).attr('id', `Map-${project.id}`);\n  $(`#Project-${project.id} .HOT-Progress`).append(`<style>.projWidth${projectOrder}:before{ width: ${projDone}%;}</style>`);\n\n\n  // Drop a map into the HOT-Map div\n  addMap(project.id);\n}\n\n// Adds placeholder/ warning formatting to project carousel entry in the event\n// that a project cannot be retrieved from the HOT Tasking Manager API\nfunction makePlaceholderProject (projectId, projectOrder) {\n  // Adds error title\n  $(`#Project-${projectId} .HOT-Title p`)\n    .html(`<i class=\"fa fa-exclamation-triangle\" aria-hidden=\"true\"></i>\n<b>HOT Project #${projectId} Not Active/Not Found in HOT Tasking Manager</b>`);\n\n  // Hides Tasking Manager Contribute button\n  $('#TM-Contribute-Btn-' + projectId).css('display', 'none');\n  $(`#HOT-Title-${projectId} p`).css('width', '100%');\n\n  // Generate issue information for Github tracker\n  const ghIssueTitle = `HOT Tasking Manager endpoint failure in ${PT.name} country page`;\n  const ghIssueBody = `Project ${projectId} is no longer indexed in the HOT\n Tasking Manager, so it should be removed from the ${PT.name} partner\n page variable settings.`;\n\n  // Add explanatory error text\n  const errorHtml = `Uh oh, it looks like <a href=\"http://tasks.hotosm.org/project/${projectId}\"\n target=\"_blank\">Project #${projectId}</a> has been removed from the HOT Tasking Manager.\n <a href=\"https://github.com/MissingMaps/partners/issues/new?title=${ghIssueTitle}&body=${ghIssueBody}\" target=\"_blank\">Click here</a> to report an issue or\n <a href=\"http://tasks.hotosm.org/\" target=\"_blank\">here</a>\n to search for more projects.`;\n\n  $(`#Project-${projectId}_clone .HOT-Description p`).html(errorHtml);\n\n  // Remove loading spinners and add placeholder background\n  $(`#Project-${projectId} .HOT-Map`).empty().addClass('placeholder');\n  $(`#Project-${projectId} .HOT-Progress `).css('display', 'none');\n  $(`#Project-${projectId} .HOT-Description`).css('display', 'none');\n}\n// Adds placeholder if no projects found in page metadata\nfunction makeNoTasksPlaceholder() {\n  let noTasksHTML = [\n    '<li style=\"list-style: none\" id = Project-NONE>',\n    '<div class = \"HOT-Container\">',\n    '<div class = \"HOT-Map placeholder\">',\n    '</div>',\n    '<div class = \"HOT-Details\">',\n    '<div class = \"HOT-Title\" id = \"HOT-Title-NONE\">',\n    '<h2><b>There currently are no tasks for this country.</b></h2>',\n    '</div>',\n    '<p><b></b></p><a href=\"http://tasks.hotosm.org/\" class=\"btn btn-blue\" id=\"TM-Contribute-Btn\">FIND OTHER TASKS</a></p>',\n    '</div>',\n    '</div>',\n    '</li>'\n  ];\n  $('.Projects-Container-Leftside').append(noTasksHTML.join(''));\n}\n\n/* -------------------------------------------------------\n ----------- Add Map to HOT Project Carousel -------------\n -------------------------------------------------------*/\n\nfunction onEachFeature (feature, layer) {\n  // Set symbology to match HOTOSM Tasking Manager completion states\n  let symbology = {\n    color: 'black',\n    weight: 0.25,\n    opacity: 0.7,\n    fillOpacity: 0.4,\n    fillColor: 'black'\n  };\n\n  const state = feature.properties.state;\n  if (state === -1) {\n    symbology.fillColor = '#dfdfdf';\n  } else if (state === 0) {\n    symbology.fillColor = '#dfdfdf';\n  } else if (state === 1) {\n    symbology.fillColor = '#dfdfdf';\n  } else if (state === 2) {\n    symbology.fillColor = '#ffa500';\n  } else if (state === 3) {\n    symbology.fillColor = '#008000';\n  }\n\n  layer.setStyle(symbology);\n}\n\nfunction addMap (projectId) {\n  // Connect HOT-OSM endpoint for tasking squares data\n  const endpoint = `http://tasks.hotosm.org/project/${projectId}/tasks.json`;\n  $.getJSON(endpoint, function (taskData) {\n    // Remove loading spinners before placing map\n    $('#Map-' + projectId).empty();\n\n    // Initialize map\n    const map = L.map('Map-' + projectId,\n      {zoomControl: false}).setView([38.889931, -77.009003], 13);\n\n    // Add tile layer\n    L.tileLayer(mbBasemapUrl + '?access_token=' + mbToken, {\n      attribution: '<a href=\"http://mapbox.com\">Mapbox</a>'\n    }).addTo(map);\n\n    // Remove 'Leaflet' attribution\n    map.attributionControl.setPrefix('');\n\n    // Add feature layer\n    const featureLayer = L.geoJson(taskData, {\n      onEachFeature: onEachFeature\n    }).addTo(map);\n\n    // Fit to feature layer bounds\n    map.fitBounds(featureLayer.getBounds());\n\n    // Disable drag and zoom handlers\n    map.dragging.disable();\n    map.touchZoom.disable();\n    map.doubleClickZoom.disable();\n    map.scrollWheelZoom.disable();\n    map.keyboard.disable();\n    if (map.tap) map.tap.disable();\n  });\n}\n\n\n/* -------------------------------------------------------\n ----------- Add Functionality to Events List  -----------\n -------------------------------------------------------*/\n\n// Adds hide/ show functionality to events list (pre-generated by Jekyll)\nfunction eventsFunctionality () {\n  const eventsCount = $('.event-sub-container').length;\n  var firstTwoOpen = false;\n  var allOpen = false;\n\n  if (eventsCount <= 3) {\n    $('.events-btn').css('display', 'none');\n  }\n\n  $('.events-btn').bind('click').click(function (event) {\n    if (firstTwoOpen === false && allOpen === false) {\n      firstTwoOpen = true;\n      $('.hidden').slice(0, 2)\n      .css('display', 'block').animate({\n        opacity: 1,\n        height: '190px'\n      }, 500);\n      if (eventsCount >= 5) {\n        $('.events-btn').html('SEE ALL');\n      } else {\n        firstTwoOpen = false;\n        allOpen = true;\n        $('.events-btn').html('SEE FEWER');\n      }\n    } else if (firstTwoOpen === true && allOpen === false && eventsCount > 2) {\n      firstTwoOpen = false;\n      allOpen = true;\n      $('.events-btn').html('SEE ALL');\n      $('.hidden').css('display', 'block').animate({\n        opacity: 1,\n        height: '190px'\n      }, 500);\n      $('.events-btn').html('SEE FEWER');\n    } else if (firstTwoOpen === false && allOpen === true) {\n      firstTwoOpen = false;\n      allOpen = false;\n      $('.hidden')\n        .animate({\n          opacity: 0,\n          height: '0px'\n        }, 300, function () {\n          $('.hidden').css('display', 'none');\n        });\n      $('.events-btn').html('SEE MORE');\n    }\n  });\n}\n\n/* -------------------------------------------------------\n -------------------- Add Events Cards -------------------\n -------------------------------------------------------*/\n\nfunction generateEvents (calendarId) {\n  if (calendarId.match(/google/)) {\n    $('#events-spinner').css('display','block');\n    const url = 'http://osmstats.redcross.org/calendar/' + calendarId + \"/events\";\n    const currentDate = new Date()\n    $.getJSON(url, (eventData) => {\n      if (eventData.length === 0) {\n        $('.events-null').css('display', 'block');\n        $('.events-panel').css('display', 'none');\n      } else {\n          let linkMatch =  /(\\b(https?|ftp|file):\\/\\/[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|])/ig;\n          console.log(eventData);\n          Object.keys(eventData).reverse().map((key, val) => {\n          const eventTime = eventData[key].time[0]\n          if (moment(currentDate).isBefore(eventTime)) {\n            const title = eventData[key].name;\n            const singupLink = eventData[key].description.match(linkMatch);\n            const desc = eventData[key].description.replace(linkMatch, '');\n            const location = eventData[key].location;\n            const date = moment(eventData[key].time[0]).format(\"MMMM Do\");\n            const time = eventData[key].time.map((d) => {\n              const date = new Date(d);\n              return moment(date).format('h:mma');\n            }).join(' - ');\n            const eventTopSection = [\n              '<div class=\"card-divider event-top-section\">',\n              '<div class=\"sub-head\">',\n              '<img class=\"event-images\" src=\"/assets/graphics/flags/4x3/' + PT.flag + '\" width=\"24\"/>',\n              '<h3 class=\"event-header\">' + title + '</h3>',\n              '<a class=\"btn btn-grn\" href=' + singupLink + ' target=\"\">SIGN UP</a>',\n              '</div>',\n              '</div>'\n            ].join('');\n            const eventMainDetails = [\n              '<div class=\"textbox\" style=\"padding-top:8px\">',\n              '<p>' + '<b>Date:</b> ' + date + '</p>',\n              '<p>' + '<b>Time:</b> ' + time + '</p>',\n              '<p>' + '<b>Location:</b> ' + location + '</p>',\n              '<p>' + '<b>About:</b> ' + desc + '</p>',\n              '</div>'\n            ].join('');\n            const eventsHTML = [\n              '<div class=\"column\">',\n              '<div class=\"card\">',\n              eventTopSection,\n              '<div class=\"card-section\">',\n              eventMainDetails,\n              '</div>',\n              '</div>',\n              '</div>'\n            ].join('');\n            $('#event-cards').append(eventsHTML);\n            $('#events-spinner').css('display', 'none');\n          }\n        });\n      }\n    });\n  } else {\n    $('.events-null').css('display', 'block');\n    $('.events-panel').css('display', 'none');\n  }\n  eventsFunctionality()\n}\n\n/* -------------------------------------------------------\n ------------------ Add Activity Graphs ------------------\n -------------------------------------------------------*/\n\nfunction setupGraphs () {\n  function removeExistingGraphs () {\n    const totalGraph = document.querySelector('#Team-User-Total-Graph svg');\n    const bldngGraph = document.querySelector('#Team-User-Bldng-Graph svg');\n    const roadsGraph = document.querySelector('#Team-User-Roads-Graph svg');\n    totalGraph.parentNode.removeChild(totalGraph);\n    bldngGraph.parentNode.removeChild(bldngGraph);\n    roadsGraph.parentNode.removeChild(roadsGraph);\n  }\n  const moreBtn = $('.btn.invert-btn-grn.teams-btn');\n  const teamLabel = $('.Team-Graph-Title .left');\n  const teamUserLabel = $('.Team-User-Graph-Title .left');\n\n  // Sets Users button to Selected, loads Users graphs, hides\n  // \"Show More Teams\" button\n  $('#Select-Users-Graph').click(function () {\n    $('#Select-Teams-Graph').removeClass('Selected');\n    $('#Select-Users-Graph').addClass('Selected');\n    teamLabel.text('Users');\n    teamUserLabel.text('Users');\n    // Remove existing graphs\n    removeExistingGraphs();\n    // Gets main hashtag on each partner page via team.html\n    getUserActivityStats(PT.code);\n  });\n\n  // Sets Teams button to Selected, loads Teams graphs, reveals\n  // \"Show More Teams\" button if applicable\n  $('#Select-Teams-Graph').click(function () {\n    $('#Select-Users-Graph').removeClass('Selected');\n    $('#Select-Teams-Graph').addClass('Selected');\n    teamLabel.text('Teams');\n    teamUserLabel.text('Teams');\n    // if (PT.subHashtags.length > 10) {\n    //   moreBtn.css('display', 'inline').animate({opacity: 1}, 500);\n    // }\n    // Remove existing graphs\n    removeExistingGraphs();\n    // Gets hashtag array on each partner page via team.html\n    getGroupActivityStats(PT.code);\n\n    showMoreContributions();\n  });\n}\n\n// Returns svg link to Missing Maps user endpoint\nfunction generateUserUrl (userName) {\n  const userUrl = 'http://www.missingmaps.org/users/#/' + userName.replace(/\\s+/g, '-').toLowerCase();\n  return `<a xlink:href=\"${userUrl}\" target=\"_blank\" style=\"text-decoration:none\">${userName}</a>`;\n}\n\nfunction getUserActivityStats (countryId) {\n\n  const url = `http://osmstats.redcross.org/countries/${countryId}/users`\n  $.getJSON(url, function (userData) {\n    if (userData.length !== 0) {\n      const totalSum = Object.keys(userData).map(function (user) {\n        const totalEdits = Math.round(Number(userData[user].all_edits));\n        return {name: generateUserUrl(userData[user].name), value: totalEdits};\n      }).sort((a, b) => b.value - a.value);\n\n      // For each user, sum the total building edits\n      const bldngSum = Object.keys(userData).map(function (user) {\n        const bldngEdits = Math.round(Number(userData[user].building_count_add));\n        return {name: generateUserUrl(userData[user].name), value: bldngEdits};\n      }).sort((a, b) => b.value - a.value);\n\n      // For each user, sum the total road kilometers edited\n      const roadsSum = Object.keys(userData).map(function (user) {\n        const roadsEdits = Math.round(Number(userData[user].road_km_add));\n        return {name: generateUserUrl(userData[user].name), value: roadsEdits};\n      }).sort((a, b) => b.value - a.value);\n\n      // Spawn a chart function with listening events for each of the metrics\n      var c1 = new Barchart(totalSum, '#Team-User-Total-Graph');\n      var c2 = new Barchart(bldngSum, '#Team-User-Bldng-Graph');\n      var c3 = new Barchart(roadsSum, '#Team-User-Roads-Graph');\n\n      const moreBtn = $('.btn.invert-btn-grn.teams-btn');\n      if (totalSum.length > 10) {\n        moreBtn.css('display', 'inline').animate({opacity: 1}, 500);\n      } else {\n        moreBtn.css('display', 'inline').animate({opacity: 0}, 500);\n      }\n\n      // On window resize, run window resize function on each chart\n      d3.select(window).on('resize', function () {\n        c1.resize();\n        c2.resize();\n        c3.resize();\n      });\n    }\n  });\n}\n\n// Returns svg link to Missing Maps leaderboard endpoint\nfunction generateHashtagUrl (hashtag) {\n  const hashtagUrl = 'http://www.missingmaps.org/leaderboards/#/' + hashtag;\n  return `<a xlink:href=\"${hashtagUrl}\" target=\"_blank\" style=\"text-decoration: none\">#${hashtag}</a>`;\n}\n\n// populate 'teams' graphs, which show activity per hashtag\nfunction getGroupActivityStats (countryId) {\n\n  const url = `http://osmstats.redcross.org/countries/${countryId}/hashtags`\n  $.getJSON(url, function (hashtagData) {\n      /*\n        For each hashtag, generate obj with link to hashtag's mm-leaderboards\n        page and the statistic of interest\n        ---\n        this is done in a reduce function w/the following steps\n        1) check to see if object has contents\n        2) get the statistic of interest, 'sum', rounded & as a Number\n        3) add to an acc list a) a link to hashtag on leaderboards and b) sum\n        4) sort the hashtags from largest to smallest 'sum' value\n      */\n    if (hashtagData.length !== 0) {\n      const totalSum = hashtagData.reduce(function (acc, ht) {\n        if (!$.isEmptyObject(ht)) {\n          const sum = Math.round(Number(ht.all_edits));\n          acc.push({name: generateHashtagUrl(ht.hashtag), value: sum});\n        }\n        return acc;\n      }, []).sort((a, b) => b.value - a.value);\n\n      const bldngSum = hashtagData.reduce(function (acc, ht) {\n      if (!$.isEmptyObject(ht)) {\n        const sum = Math.round(Number(ht.building_count_add)) +\n        Math.round(Number(ht.building_count_mod));\n        acc.push({name: generateHashtagUrl(ht.hashtag), value: sum});\n      }\n        return acc;\n      }, []).sort((a, b) => b.value - a.value);\n\n      const roadsSum = hashtagData.reduce(function (acc, ht) {\n        if (!$.isEmptyObject(ht)) {\n          const sum = Math.round(Number(ht.road_km_add)) +\n                      Math.round(Number(ht.road_km_add));\n          acc.push({name: generateHashtagUrl(ht.hashtag), value: sum});\n        }\n        return acc;\n      }, []).sort((a, b) => b.value - a.value);\n\n      // Spawn a chart function with listening events for each of the metrics\n      var c1 = new Barchart(totalSum, '#Team-User-Total-Graph');\n      var c2 = new Barchart(bldngSum, '#Team-User-Bldng-Graph');\n      var c3 = new Barchart(roadsSum, '#Team-User-Roads-Graph');\n\n      const moreBtn = $('.btn.invert-btn-grn.teams-btn');\n      if (totalSum.length > 10) {\n        moreBtn.css('display', 'inline').animate({opacity: 1}, 500);\n      } else {\n        moreBtn.css('display', 'inline').animate({opacity: 0}, 500);\n      }\n      // On window resize, run window resize function on each chart\n      d3.select(window).on('resize', function () {\n        c1.resize();\n        c2.resize();\n        c3.resize();\n      });\n    } else {\n      $('.Team-User-Nav').css('display','none');\n      $('.Team-User-Stats').css('display','none');\n      $('.teams-more').css('display','none');\n      $('.teams-none').css('display', 'block');\n      $('.Team-User-Container h1').css('text-align', 'center');\n    }\n  });\n}\n\nfunction Barchart (data, targetElement) {\n  // Setting margins and size using Bostock conventions for future\n  // ease of use, although currently leaving margins at 0\n  let margin = {top: 0, right: 0, bottom: 0, left: 0};\n  var width = parseInt(d3.select(targetElement).style('width'), 10);\n  width = width - margin.left - margin.right;\n  let height = 220;\n  let barPadding = 60 / data.length;\n  let barHeight = (height - margin.top - margin.bottom) / data.length - barPadding;\n\n  // If more than 10 records...\n  if (data.length > 10) {\n    // ...freeze dynamic sizing of bars and begin expanding the svg height instead\n    barPadding = 60 / 10;\n    barHeight = (height - margin.top - margin.bottom) / 10 - barPadding;\n    height = height + ((barPadding + barHeight) * (data.length - 10));\n    // ...enable \"Show More\" functionality; button appears which allows\n    // for panning up and down the length of svg bar graph\n    const offset = -((data.length - 10) * (barPadding + barHeight)) - 12;\n    let expanded = false;\n    $('.teams-btn')\n      .css('display', 'initial')\n      .click(function () {\n        const graphs = $('.Team-User-Graph > svg');\n        if (expanded === false) {\n          $('.teams-btn').html('SHOW INITIAL TEAMS');\n          graphs.animate({marginTop: offset}, 300);\n          expanded = true;\n        } else if (expanded === true) {\n          $('.teams-btn').html('SHOW MORE TEAMS');\n          graphs.animate({marginTop: 0}, 300);\n          expanded = false;\n        }\n      });\n  }\n\n  // Define scales\n  const x = d3.scale.linear()\n    .range([0, width])\n    .domain([0, d3.max(data, (d) => d.value)]);\n\n  // Create the chart\n  var chart = d3.select(targetElement).append('svg')\n    .style('width', (width + margin.left + margin.right) + 'px')\n    .style('height', height + 'px')\n  .append('g')\n    .attr('transform', 'translate(' + [margin.left, margin.top] + ')');\n\n  d3.select(chart.node().parentNode)\n    .style('height', height + 'px');\n\n  // Render the chart, add the set the bar groups\n  var bars = chart.selectAll('.bar')\n    .data(data)\n  .enter().append('g')\n    .attr('class', 'bar')\n    .attr('transform', (d, i) => {\n      return `translate(0,${i * (barHeight + barPadding)})`;\n    });\n\n  // Add the bar rectangles\n  bars.append('rect')\n    .attr('class', 'bars')\n    .attr('height', barHeight)\n    .attr('width', (d) => x(d.value));\n\n  // Add the name labels\n  bars.append('text')\n    .attr('class', 'Graph-Label-Name')\n    .attr('x', 5)\n    .attr('y', barHeight / 2)\n    .attr('dy', '.35em')\n    .html((d) => d.name)\n    .style('fill', '#606161');\n\n  // Add the value labels\n  bars.append('text')\n    .attr('class', 'Graph-Label-Value')\n    .attr('x', width - 20)\n    .attr('y', barHeight / 2)\n    .attr('dy', '.35em')\n    .text((d) => d.value.toLocaleString())\n    .attr('text-anchor', 'end')\n    .style('fill', '#606161');\n\n  this.resize = function () {\n    // Recalculate width of chart\n    width = parseInt(d3.select(targetElement).style('width'), 10);\n    width = width - margin.left - margin.right;\n\n    // Update svg size\n    d3.select(targetElement).select('svg')\n      .style('width', (width + margin.left + margin.right) + 'px');\n\n    // Update the scale of chart\n    x.range([0, width]);\n\n    // Update the bar width\n    chart.selectAll('rect.bars')\n      .attr('width', (d) => x(d.value));\n\n    // Update the value text position\n    chart.selectAll('text.Graph-Label-Value')\n      .attr('x', width - 20);\n  };\n}\n\n\nfunction showUpdatesPlaceholder() {\n  if ($(\".Updates-Content\").length === 0) {\n    $(\".updates-null\").css('display', 'block')\n    $(\"#updates-h1\").css('text-align', 'center')\n  }\n}\n\n/* !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n ---------------------------------------------------------\n --------------------- Setup Project ---------------------\n -------------------------------------------------------*/\n// Global Mapbox variables\nconst mbToken = 'pk.eyJ1IjoiZGV2c2VlZCIsImEiOiJnUi1mbkVvIn0.018aLhX0Mb0tdtaT2QNe2Q';\nconst mbBasemapUrl = 'https://api.mapbox.com/v4/mapbox.light/{z}/{x}/{y}.png';\n\nif (PT.name !== 'Microsites') {\n  showUpdatesPlaceholder()\n  // Populate the primary stats in hero via Missing Maps API\n  getPrimaryStats(PT.code);\n  // Populate initial groups graph via Missing Maps API\n  getGroupActivityStats(PT.code);\n  // Populate project carousel via HOTOSM Tasking Manager API\n  getProjects(PT.hotProjects);\n  // Populate events section with upcoming events\n  generateEvents(PT.calendar);\n  // setupGraphs\n  setupGraphs();\n}\n"],"sourceRoot":"/source/"}